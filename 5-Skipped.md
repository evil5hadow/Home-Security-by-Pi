**Table of Contents**
- [Introduction](https://github.com/teusink/Home-Security-by-Pi/blob/master/README.md)
- [1 - Installation](https://github.com/teusink/Home-Security-by-Pi/blob/master/1-Installation.md)
- [2 - Configuration](https://github.com/teusink/Home-Security-by-Pi/blob/master/2-Configuration.md)
- [3 - Hardening](https://github.com/teusink/Home-Security-by-Pi/blob/master/3-Hardening.md)
- [4 - Maintenance](https://github.com/teusink/Home-Security-by-Pi/blob/master/4-Maintenance.md)
- 5- Skipped

# Skipped
There were also security configurations suggested by others on the web that I skipped. I will try to be as complete as possible on which I did not include and why. If you feel it should be included, please open an issue [here](https://github.com/teusink/Home-Security-by-Pi/issues).

| Did not include | Why not? | Source for: Why not | Source for: Why it should |
| --- | --- | --- | --- |
| Add `sudo dist-upgrade` in unattended patching | The command `sudo dist-upgrade` might add or, even worse, remove packages you don't want to be added or removed. I made it an option in the shell-script for updates `sudo sh ./pi-update.sh dist-upgrade` | [askubuntu.com](https://askubuntu.com/questions/601/the-following-packages-have-been-kept-back-why-and-how-do-i-solve-it) | [raspberrypi.org](https://www.raspberrypi.org/documentation/raspbian/updating.md)
| SSH keys with remote manaagement | Generating SSH keys was a step to far in the trade-off for usability, in the context that this Pi is never ever meant to be directly connected to the Internet, other than through VPN. I would say username and password with fail2ban is good enough considering the use-case. | N/A | [Jacob Salmela, PDF](http://users.telenet.be/MySQLplaylist/pi-hole.pdf) |
| Tripwire, Host-based IDS | Although Tripwire and similar tools are cool, there are a bit to steep for the use-case of this Pi. It is not directly connected to Internet (apart from OpenVPN) and therefore the risk is not as great when it is connected to the Internet | N/A | N/A |
| Using non-default TCP/UDP-ports for services | Although it is often advised, I keep using default ports (like 22 for SSH and 1194 for OpenVPN). There is no Security through Obscurity. It makes the live of a malicious hacker more difficult with non-default-ports, but that is for like 30 seconds or so. | N/A | N/A |
| Harden SSH configuration: TCPKeepAlive (YES --> NO) | By setting it to no active user sessions may occur, while they are not active. To clean up the resources automatically I choose to keep it to Yes | [SSH manual](https://www.ssh.com/ssh/config/) | [Lynis system audit](https://cisofy.com/controls/SSH-7408/) |
| Install libpam-usb to enable multi-factor authentication for PAM sessions | Due to this being MFA with physical USB-key, it is not a convient one, because you either need to put it in permanently (which in essence disables the purpose) or suffer from lack of remote management. So I did not include it. | [Debian package info](https://packages.debian.org/sid/libpam-usb) | Lynis system audit |
| Use a PAE enabled kernel when possible to gain native No eXecute/eXecute Disable support | I'd rather leave any and all kernel management to Raspbian themselves :) | N/A | [Lynis system audit](https://cisofy.com/controls/KRNL-5677/) |
| Link /vmlinuz is missing. Consider manually re-linking. | I'd rather leave any and all kernel management to Raspbian themselves :) | N/A | [Lynis system audit](https://cisofy.com/controls/KRNL-5788/) |
| Lynis advises several package manager tools, such as critical bug reports, checksum checker, and more. | Although such tools come in handy, in general, this Pi has a fixed state and in addition, packages are updated automatically and reboots always happen. There is not so much added value with these tools. | N/A | [debian-goodies](https://packages.debian.org/wheezy/debian-goodies) & [apt-listsbugs](https://packages.debian.org/sid/apt-listbugs) & [debsums](https://packages.debian.org/stretch/debsums) |
| Install a PAM module for password strength testing like pam_cracklib or pam_passwdqc | There is only one account and you can use a tool online/offline to generate that random strong password. With multiple accounts it is really wise to do this, but as it is a headless unit offering some network-services this is overkill. | N/A | [Lynis system audit](https://cisofy.com/controls/AUTH-9262/) |
| Configure a minimum and maximum password age in /etc/login.defs | Password aging is old advise and the world has changed. A password must be unique and long (preferably a passphrase or random generated). Changing them regularly, while using brute-force limiters, doesn't do any good other than creating work. | [The man who put us through password hell regrets everything](https://www.engadget.com/2017/08/08/nist-new-password-guidelines/) | [Lynis system audit](https://cisofy.com/controls/AUTH-9286/) |
| Add a legal banner to /etc/issue and /etc/issue.net, to warn unauthorized users | I am going to skip this. Logging into the system is only possible when on the LAN (either directly or through VPN). And as I am the only admin of this device, putting up a legal-banner is kinda silly. And any malicous hacker is going to ignore it anyway. | N/A | Lynis system audit [1](https://cisofy.com/controls/BANN-7126/) & [2](https://cisofy.com/controls/BANN-7130/) |
| Default umask in /etc/login.defs could be more strict like 027 | Default umask is now 0022 (default Debian Stretch for Raspbian I presume). The advisory states that a more strict umask is important on multi-user servers, to make sure that accidental traversing directories and reading files won't happen. This is a device with a single user and without file-server usages. So I leave it as it is to prevent unintended failures with software specifically for the Raspberry Pi. | N/A | [Lynis system audit](https://cisofy.com/controls/AUTH-9328/) |
| Use ClamAV to fight of virusses | It was included first in this guide, but later on removed. The ClamAV service uses much memory (500+ MB out of the 1GB!). In order to compensate for the (slightly) higher risk, some other software packages and Samba were removed. | [Issue 29](https://github.com/teusink/Home-Security-by-Pi/issues/29) | N/A |
